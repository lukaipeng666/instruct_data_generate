========================================
  Go后端API完整测试 - 使用真实数据
  测试账号: lkp666 / lkp666
  真实数据ID: 文件=2, 任务=问句改写-1.7B效果评测-B评测集1.7B_20251118_错误数据_提取结果_1, 数据=13
  时间: 2025-12-28 13:30:48
========================================

[1;33m➤ 启动服务器...[0m

========================================
  用户登录 (lkp666)
========================================

[2025-12-28 13:30:51] 用户登录 lkp666
{"code":200,"message":"登录成功","data":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjozLCJ1c2VybmFtZSI6ImxrcDY2NiIsImlzX2FkbWluIjpmYWxzZSwiZXhwIjoxNzY5NDkxODUyLCJuYmYiOjE3NjY4OTk4NTIsImlhdCI6MTc2Njg5OTg1Mn0.lo_BIy5_gXRI2r3yA8KNKKxcwsDMvDOpvikBqvtaffs","token_type":"bearer","user":{"id":3,"username":"lkp666","is_active":true,"is_admin":false}}}
[0;32m✓ 用户Token获取成功[0m

========================================
  使用真实数据ID测试失败接口
========================================

--- 任务管理接口 (使用真实任务ID) ---
[2025-12-28 13:30:52] 测试: 获取真实任务状态
[1;33m➤   方法: GET[0m
[1;33m➤   路径: /api/status/问句改写-1.7B效果评测-B评测集1.7B_20251118_错误数据_提取结果_1[0m
[0;31m✗ 获取真实任务状态 - 失败 (HTTP 404)[0m
[1;33m➤   响应: {"code":404,"message":"任务不存在"}[0m

[2025-12-28 13:30:52] 测试: 停止真实任务
[1;33m➤   方法: POST[0m
[1;33m➤   路径: /api/stop/问句改写-1.7B效果评测-B评测集1.7B_20251118_错误数据_提取结果_1[0m
[0;31m✗ 停止真实任务 - 失败 (HTTP 500)[0m
[1;33m➤   响应: {"code":500,"message":"任务不存在"}[0m


--- 数据文件管理接口 (使用真实文件ID) ---
[2025-12-28 13:30:52] 测试: 获取真实文件详情
[1;33m➤   方法: GET[0m
[1;33m➤   路径: /api/data_files/2[0m
[0;32m✓ 获取真实文件详情 - 通过 (HTTP 200)[0m

[2025-12-28 13:30:52] 测试: 获取真实文件内容
[1;33m➤   方法: GET[0m
[1;33m➤   路径: /api/data_files/2/content[0m
[0;32m✓ 获取真实文件内容 - 通过 (HTTP 200)[0m

[2025-12-28 13:30:52] 测试: 下载真实文件
[1;33m➤   方法: GET[0m
[1;33m➤   路径: /api/data_files/2/download[0m
[0;32m✓ 下载真实文件 - 通过 (HTTP 0)[0m

[2025-12-28 13:30:52] 测试: 下载真实文件为CSV
[1;33m➤   方法: GET[0m
[1;33m➤   路径: /api/data_files/2/download_csv[0m
[0;32m✓ 下载真实文件为CSV - 通过 (HTTP 0)[0m

[2025-12-28 13:30:52] 测试: 更新真实文件内容
[1;33m➤   方法: PUT[0m
[1;33m➤   路径: /api/data_files/2/content/0[0m
[1;33m➤   数据: {"content":{"key":"value"}}[0m
[0;32m✓ 更新真实文件内容 - 通过 (HTTP 200)[0m

[2025-12-28 13:30:52] 测试: 添加真实文件内容
[1;33m➤   方法: POST[0m
[1;33m➤   路径: /api/data_files/2/content[0m
[1;33m➤   数据: {"content":{"key":"value"}}[0m
[0;32m✓ 添加真实文件内容 - 通过 (HTTP 200)[0m


--- 生成数据接口 (使用真实数据ID) ---
[2025-12-28 13:30:52] 测试: 更新真实生成数据
[1;33m➤   方法: PUT[0m
[1;33m➤   路径: /api/generated_data/13[0m
[1;33m➤   数据: {"id":13,"data_content":{"key":"value"}}[0m
[0;32m✓ 更新真实生成数据 - 通过 (HTTP 200)[0m


--- 批量操作接口 (使用真实ID) ---
[2025-12-28 13:30:52] 测试: 批量删除文件内容(真实索引)
[1;33m➤   方法: DELETE[0m
[1;33m➤   路径: /api/data_files/2/content/batch?indices=0,1[0m
[0;31m✗ 批量删除文件内容(真实索引) - 失败 (HTTP 400)[0m
[1;33m➤   响应: {"code":400,"message":"EOF"}[0m

[2025-12-28 13:30:52] 测试: 批量删除生成数据(真实ID)
[1;33m➤   方法: DELETE[0m
[1;33m➤   路径: /api/generated_data/batch?data_ids=13,14[0m
[0;31m✗ 批量删除生成数据(真实ID) - 失败 (HTTP 400)[0m
[1;33m➤   响应: {"code":400,"message":"EOF"}[0m

========================================
  全面接口测试
========================================

--- 认证接口 ---
[2025-12-28 13:30:52] 测试: 健康检查
[1;33m➤   方法: GET[0m
[1;33m➤   路径: /[0m
[0;32m✓ 健康检查 - 通过 (HTTP 0)[0m

[2025-12-28 13:30:52] 测试: 获取用户信息
[1;33m➤   方法: GET[0m
[1;33m➤   路径: /api/me[0m
[0;32m✓ 获取用户信息 - 通过 (HTTP 200)[0m


--- 任务管理 ---
[2025-12-28 13:30:52] 测试: 获取任务列表
[1;33m➤   方法: GET[0m
[1;33m➤   路径: /api/tasks[0m
[0;32m✓ 获取任务列表 - 通过 (HTTP 200)[0m

[2025-12-28 13:30:52] 测试: 获取活跃任务
[1;33m➤   方法: GET[0m
[1;33m➤   路径: /api/active_task[0m
[0;32m✓ 获取活跃任务 - 通过 (HTTP 200)[0m


--- 数据文件管理 ---
[2025-12-28 13:30:52] 测试: 获取文件列表
[1;33m➤   方法: GET[0m
[1;33m➤   路径: /api/data_files?page=1&per_page=10[0m
[0;32m✓ 获取文件列表 - 通过 (HTTP 200)[0m

[2025-12-28 13:30:52] 测试: 批量删除文件(真实ID)
[1;33m➤   方法: POST[0m
[1;33m➤   路径: /api/data_files/batch_delete[0m
[1;33m➤   数据: {"ids":[2]}[0m
[0;32m✓ 批量删除文件(真实ID) - 通过 (HTTP 200)[0m

[2025-12-28 13:30:52] 测试: 批量下载文件(真实ID)
[1;33m➤   方法: POST[0m
[1;33m➤   路径: /api/data_files/batch_download[0m
[1;33m➤   数据: {"ids":[2]}[0m
[0;32m✓ 批量下载文件(真实ID) - 通过 (HTTP 200)[0m


--- 模型接口 ---
[2025-12-28 13:30:52] 测试: 获取模型列表
[1;33m➤   方法: GET[0m
[1;33m➤   路径: /api/models[0m
[0;32m✓ 获取模型列表 - 通过 (HTTP 200)[0m


--- 生成数据接口 ---
[2025-12-28 13:30:52] 测试: 获取生成数据列表
[1;33m➤   方法: GET[0m
[1;33m➤   路径: /api/generated_data?page=1&per_page=10[0m
[0;31m✗ 获取生成数据列表 - 失败 (HTTP 400)[0m
[1;33m➤   响应: {"code":400,"message":"缺少task_id参数"}[0m

[2025-12-28 13:30:52] 测试: 获取真实任务数据信息
[1;33m➤   方法: GET[0m
[1;33m➤   路径: /api/generated_data/问句改写-1.7B效果评测-B评测集1.7B_20251118_错误数据_提取结果_1/info[0m
[0;32m✓ 获取真实任务数据信息 - 通过 (HTTP 200)[0m

[2025-12-28 13:30:52] 测试: 导出生成数据
[1;33m➤   方法: GET[0m
[1;33m➤   路径: /api/generated_data/export?page=1&per_page=10[0m
[0;31m✗ 导出生成数据 - 失败 (HTTP 400)[0m
[1;33m➤   响应: {"code":400,"message":"缺少task_id参数"}[0m

[2025-12-28 13:30:52] 测试: 下载真实任务数据
[1;33m➤   方法: GET[0m
[1;33m➤   路径: /api/generated_data/问句改写-1.7B效果评测-B评测集1.7B_20251118_错误数据_提取结果_1/download[0m
[0;32m✓ 下载真实任务数据 - 通过 (HTTP 0)[0m

[2025-12-28 13:30:52] 测试: 下载真实任务数据为CSV
[1;33m➤   方法: GET[0m
[1;33m➤   路径: /api/generated_data/问句改写-1.7B效果评测-B评测集1.7B_20251118_错误数据_提取结果_1/download_csv[0m
[0;32m✓ 下载真实任务数据为CSV - 通过 (HTTP 0)[0m

[2025-12-28 13:30:52] 测试: 批量更新生成数据
[1;33m➤   方法: POST[0m
[1;33m➤   路径: /api/generated_data/batch_update[0m
[1;33m➤   数据: {"updates":[]}[0m
[0;32m✓ 批量更新生成数据 - 通过 (HTTP 200)[0m

[2025-12-28 13:30:52] 测试: 批量确认生成数据
[1;33m➤   方法: POST[0m
[1;33m➤   路径: /api/generated_data/batch_confirm[0m
[1;33m➤   数据: {"ids":[13]}[0m
[0;32m✓ 批量确认生成数据 - 通过 (HTTP 200)[0m

[2025-12-28 13:30:52] 测试: 确认真实生成数据
[1;33m➤   方法: POST[0m
[1;33m➤   路径: /api/generated_data/13/confirm[0m
[0;32m✓ 确认真实生成数据 - 通过 (HTTP 200)[0m


--- 报告接口 ---
[2025-12-28 13:30:52] 测试: 获取报告列表
[1;33m➤   方法: GET[0m
[1;33m➤   路径: /api/reports?page=1&per_page=10[0m
[0;32m✓ 获取报告列表 - 通过 (HTTP 200)[0m

[2025-12-28 13:30:52] 测试: 获取真实任务报告
[1;33m➤   方法: GET[0m
[1;33m➤   路径: /api/reports/问句改写-1.7B效果评测-B评测集1.7B_20251118_错误数据_提取结果_1/data[0m
[0;32m✓ 获取真实任务报告 - 通过 (HTTP 200)[0m


--- 文件转换 ---
[2025-12-28 13:30:52] 测试: 批量转换文件
[1;33m➤   方法: POST[0m
[1;33m➤   路径: /api/data_files/batch_convert[0m
[1;33m➤   数据: {"file_ids":[]}[0m
[0;32m✓ 批量转换文件 - 通过 (HTTP 0)[0m

[2025-12-28 13:30:53] 测试: 上传并转换文件
[1;33m➤   方法: POST[0m
[1;33m➤   路径: /api/convert_files[0m
[1;33m➤   数据: {}[0m
[0;32m✓ 上传并转换文件 - 通过 (HTTP 0)[0m


========================================
  管理员接口测试
========================================

[2025-12-28 13:30:53] 管理员登录
[0;32m✓ 管理员Token获取成功[0m

[2025-12-28 13:30:53] 测试: 获取所有用户
[1;33m➤   方法: GET[0m
[1;33m➤   路径: /api/admin/users[0m
[0;32m✓ 获取所有用户 - 通过 (HTTP 200)[0m

[2025-12-28 13:30:53] 测试: 获取所有任务
[1;33m➤   方法: GET[0m
[1;33m➤   路径: /api/admin/tasks[0m
[0;31m✗ 获取所有任务 - 失败 (HTTP 500)[0m
[1;33m➤   响应: {"code":500,"message":"no such column: created_at"}[0m

[2025-12-28 13:30:53] 测试: 获取所有模型
[1;33m➤   方法: GET[0m
[1;33m➤   路径: /api/admin/models[0m
[0;32m✓ 获取所有模型 - 通过 (HTTP 200)[0m

[2025-12-28 13:30:53] 测试: 获取用户报告
[1;33m➤   方法: GET[0m
[1;33m➤   路径: /api/admin/users/3/reports[0m
[0;32m✓ 获取用户报告 - 通过 (HTTP 200)[0m


========================================
  测试完成
========================================

总测试数: 35
通过数: 30
失败数: 7

测试结果已保存到: test_results/test_results_realdata_20251228_133048.txt

[1;33m➤ 停止服务器...[0m
